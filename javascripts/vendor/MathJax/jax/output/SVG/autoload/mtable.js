/*
 *  /MathJax/jax/output/SVG/autoload/mtable.js
 *
 *  Copyright (c) 2009-2015 The MathJax Consortium
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){var t=MathJax.ElementJax.mml,a=MathJax.OutputJax.SVG,e=a.BBOX;t.mtable.Augment({toSVG:function(){this.SVGgetStyles();var n=this.SVG(),i=this.SVGgetScale(n);if(0===this.data.length)return this.SVGsaveData(n),n;var l=this.getValues("columnalign","rowalign","columnspacing","rowspacing","columnwidth","equalcolumns","equalrows","columnlines","rowlines","frame","framespacing","align","useHeight","width","side","minlabelspacing");l.width.match(/%$/)&&(n.width=l.width=a.Em(a.cwidth/1e3*(parseFloat(l.width)/100)));var h,s,r,g,d,o,m,f,c,u=this.SVGgetMu(n),S=-1,p=[],G=[],V=[],w=[],N=[],x=-1,I=a.FONTDATA.lineH*i*l.useHeight,M=a.FONTDATA.lineD*i*l.useHeight;for(h=0,r=this.data.length;r>h;h++)for(o=this.data[h],d="mlabeledtr"===o.type?S:0,w[h]=[],p[h]=I,G[h]=M,s=d,g=o.data.length+d;g>s;s++){if(null==V[s]&&(s>x&&(x=s),N[s]=e.G(),V[s]=-a.BIGDIMEN),m=o.data[s-d],w[h][s]=m.toSVG(),m.isEmbellished()){f=m.CoreMO();var A=f.Get("minsize",!0);A&&(f.SVGcanStretch("Vertical")?(c=f.SVGdata.h+f.SVGdata.d,c&&(A=a.length2em(A,u,c),A*f.SVGdata.h/c>p[h]&&(p[h]=A*f.SVGdata.h/c),A*f.SVGdata.d/c>G[h]&&(G[h]=A*f.SVGdata.d/c))):f.SVGcanStretch("Horizontal")&&(A=a.length2em(A,u,f.SVGdata.w),A>V[s]&&(V[s]=A)))}w[h][s].h>p[h]&&(p[h]=w[h][s].h),w[h][s].d>G[h]&&(G[h]=w[h][s].d),w[h][s].w>V[s]&&(V[s]=w[h][s].w)}var v=MathJax.Hub.SplitList,E=v(l.columnspacing),b=v(l.rowspacing),T=v(l.columnalign),H=v(l.rowalign),y=v(l.columnlines),D=v(l.rowlines),L=v(l.columnwidth),J=[];for(h=0,r=E.length;r>h;h++)E[h]=a.length2em(E[h],u);for(h=0,r=b.length;r>h;h++)b[h]=a.length2em(b[h],u);for(;E.length<x;)E.push(E[E.length-1]);for(;T.length<=x;)T.push(T[T.length-1]);for(;y.length<x;)y.push(y[y.length-1]);for(;L.length<=x;)L.push(L[L.length-1]);for(;b.length<w.length;)b.push(b[b.length-1]);for(;H.length<=w.length;)H.push(H[H.length-1]);for(;D.length<w.length;)D.push(D[D.length-1]);for(N[S]&&(T[S]="l"===l.side.substr(0,1)?"left":"right",E[S]=-V[S]),h=0,r=w.length;r>h;h++)if(o=this.data[h],J[h]=[],o.rowalign&&(H[h]=o.rowalign),o.columnalign)for(J[h]=v(o.columnalign);J[h].length<=x;)J[h].push(J[h][J[h].length-1]);if(l.equalrows){var C=Math.max.apply(Math,p),R=Math.max.apply(Math,G);for(h=0,r=w.length;r>h;h++)d=(C+R-(p[h]+G[h]))/2,p[h]+=d,G[h]+=d}for(c=p[0]+G[w.length-1],h=0,r=w.length-1;r>h;h++)c+=Math.max(0,G[h]+p[h+1]+b[h]);var O,F=0,q=0,X=c;if("none"!==l.frame||(l.columnlines+l.rowlines).match(/solid|dashed/)){var $=v(l.framespacing);2!=$.length&&($=v(this.defaults.framespacing)),F=a.length2em($[0],u),q=a.length2em($[1],u),X=c+2*q}var z,B,j="";if("string"!=typeof l.align&&(l.align=String(l.align)),l.align.match(/(top|bottom|center|baseline|axis)( +(-?\d+))?/)?(j=RegExp.$3||"",l.align=RegExp.$1):l.align=this.defaults.align,""!==j)for(j=parseInt(j),0>j&&(j=w.length+1+j),1>j?j=1:j>w.length&&(j=w.length),z=0,B=-(c+q)+p[0],h=0,r=j-1;r>h;h++){var P=Math.max(0,G[h]+p[h+1]+b[h]);z+=P,B+=P}else z={top:-(p[0]+q),bottom:c+q-p[0],center:c/2-p[0],baseline:c/2-p[0],axis:c/2+a.TeX.axis_height*i-p[0]}[l.align],B={top:-(c+2*q),bottom:0,center:-(c/2+q),baseline:-(c/2+q),axis:a.TeX.axis_height*i-c/2-q}[l.align];var U,_=0,k=0,K=0,Q=0,W=0,Y=[],Z=[],ta=1;if(l.equalcolumns&&"auto"!==l.width){for(U=a.length2em(l.width,u),h=0,r=Math.min(x+1,E.length);r>h;h++)U-=E[h];for(U/=x+1,h=0,r=Math.min(x+1,L.length);r>h;h++)V[h]=U}else{for(h=0,r=Math.min(x+1,L.length);r>h;h++)"auto"===L[h]?k+=V[h]:"fit"===L[h]?(Z[W]=h,W++,k+=V[h]):L[h].match(/%$/)?(Y[Q]=h,Q++,K+=V[h],_+=a.length2em(L[h],u,1)):(V[h]=a.length2em(L[h],u),k+=V[h]);if("auto"===l.width)_>.98?(ta=K/(k+K),U=k+K):U=k/(1-_);else for(U=a.length2em(l.width,u),h=0,r=Math.min(x+1,E.length);r>h;h++)U-=E[h];for(h=0,r=Y.length;r>h;h++)V[Y[h]]=a.length2em(L[Y[h]],u,U*ta),k+=V[Y[h]];if(Math.abs(U-k)>.01)if(W&&U>k)for(U=(U-k)/W,h=0,r=Z.length;r>h;h++)V[Z[h]]+=U;else for(U/=k,s=0;x>=s;s++)V[s]*=U;if(l.equalcolumns){var aa=Math.max.apply(Math,V);for(s=0;x>=s;s++)V[s]=aa}}var ea,na,ia=z;for(d=N[S]?S:0,s=d;x>=s;s++){for(N[s].w=V[s],h=0,r=w.length;r>h;h++){if(w[h][s]){if(d="mlabeledtr"===this.data[h].type?S:0,m=this.data[h].data[s-d],m.SVGcanStretch("Horizontal"))w[h][s]=m.SVGstretchH(V[s]);else if(m.SVGcanStretch("Vertical")){f=m.CoreMO();var la=f.symmetric;f.symmetric=!1,w[h][s]=m.SVGstretchV(p[h],G[h]),f.symmetric=la}na=m.rowalign||this.data[h].rowalign||H[h],ea={top:p[h]-w[h][s].h,bottom:w[h][s].d-G[h],center:(p[h]-G[h]-(w[h][s].h-w[h][s].d))/2,baseline:0,axis:0}[na]||0,na=m.columnalign||J[h][s]||T[s],N[s].Align(w[h][s],na,0,ia+ea)}h<w.length-1&&(ia-=Math.max(0,G[h]+p[h+1]+b[h]))}ia=z}var ha=1.5*a.em,sa=F-ha/2;for(s=0;x>=s;s++)n.Add(N[s],sa,0),sa+=V[s]+E[s],"none"!==y[s]&&x>s&&s!==S&&n.Add(e.VLINE(X,ha,y[s]),sa-E[s]/2,B);for(n.w+=F,n.d=-B,n.h=X+B,O=n.w,"none"!==l.frame&&(n.Add(e.HLINE(O,ha,l.frame),0,B+X-ha),n.Add(e.HLINE(O,ha,l.frame),0,B),n.Add(e.VLINE(X,ha,l.frame),0,B),n.Add(e.VLINE(X,ha,l.frame),O-ha,B)),ia=z-ha/2,h=0,r=w.length-1;r>h;h++)ea=Math.max(0,G[h]+p[h+1]+b[h]),"none"!==D[h]&&n.Add(e.HLINE(O,ha,D[h]),0,ia-G[h]-(ea-G[h]-p[h+1])/2),ia-=ea;if(n.Clean(),this.SVGhandleSpace(n),this.SVGhandleColor(n),N[S]){n.tw=Math.max(n.w,n.r)-Math.min(0,n.l);var ra=this.getValues("indentalignfirst","indentshiftfirst","indentalign","indentshift");ra.indentalignfirst!==t.INDENTALIGN.INDENTALIGN&&(ra.indentalign=ra.indentalignfirst),ra.indentalign===t.INDENTALIGN.AUTO&&(ra.indentalign=this.displayAlign),ra.indentshiftfirst!==t.INDENTSHIFT.INDENTSHIFT&&(ra.indentshift=ra.indentshiftfirst),("auto"===ra.indentshift||""===ra.indentshift)&&(ra.indentshift="0");var ga=a.length2em(ra.indentshift,u,a.cwidth),da=a.length2em(l.minlabelspacing,u,a.cwidth);if("0"!==this.displayIndent){var oa=a.length2em(this.displayIndent,u,a.cwidth);ga+=ra.indentAlign===t.INDENTALIGN.RIGHT?-oa:oa}var ma=n;n=this.SVG(),n.w=n.r=a.cwidth,n.hasIndent=!0,n.Align(N[S],T[S],da,0),n.Align(ma,ra.indentalign,0,0,ga),n.tw+=N[S].w+ga+(ra.indentalign===t.INDENTALIGN.CENTER?8:4)*da}return this.SVGsaveData(n),n},SVGhandleSpace:function(t){this.hasFrame||t.width||(t.x=t.X=167),this.SUPER(arguments).SVGhandleSpace.call(this,t)}}),t.mtd.Augment({toSVG:function(t,a){var e=this.svg=this.SVG();return this.data[0]&&(e.Add(this.SVGdataStretched(0,t,a)),e.Clean()),this.SVGhandleColor(e),this.SVGsaveData(e),e}}),MathJax.Hub.Startup.signal.Post("SVG mtable Ready"),MathJax.Ajax.loadComplete(a.autoloadDir+"/mtable.js")});